@using LOBP.Models
@using LOBP.DbEntities
@model List<PaymentReportViewModel>
@{
    ViewBag.Title = "PaymentList";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";

    var db = new LubeBlendingDBEntities();
    string userlocation = ((LOBP.DbEntities.UserMaster)(Session["UserID"])).UserLocation;
    var statecodes = new List<string>();
    var field = db.FieldLocations.FirstOrDefault(x => x.FieldLocationID == userlocation);


    var fields = field.FieldType.Equals("FD") ? (from r in db.RequestFieldMappings
                                                 join f in db.FieldLocations on r.FieldLocationID equals f.FieldLocationID
                                                 where r.FieldLocationID.Equals(userlocation)
                                                 select new { f.Description, r.StateCode }).ToDictionary(x => x.StateCode, y => y.Description)
     : (from r in db.RequestFieldMappings
        join f in db.FieldLocations on r.FieldLocationID equals f.FieldLocationID
        select new { f.Description, r.StateCode }).ToDictionary(x => x.StateCode, y => y.Description);

    var fieldzones = db.ZoneFieldMappings.Where(x => x.ZoneFieldID == userlocation).Select(y => y.FieldLocationID).ToList();

    statecodes = db.RequestFieldMappings.Where(x => fieldzones.Contains(x.FieldLocationID)).Select(x => x.StateCode.ToLower()).ToList();
}
<div class="content">



    <div class="row">
        <div class="col-md-12">
           
            <div class="panel">
                <header class="panel-heading panel-border">
                    <h3 class="text-primary"> Payment Report </h3>


                </header>
                @using (Html.BeginForm("PaymentList", "Admin", FormMethod.Post, new { @id = "formsearch" }))
                {
                    <div class="panel-body">
                        <div class="row">
                            <div class="col-md-10">
                                <div class="col-md-3">
                                    <div class="input-group">
                                        <div class="input-group-addon" style="background-color:orange"><i class="fa fa-calendar"></i></div>
                                        <div><input type="text" value="@ViewData["startdate"]" class="min form-control" autocomplete="off" id="min" name="min" placeholder="From" /></div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="input-group">
                                        <div class="input-group-addon" style="background-color:yellowgreen"><i class="fa fa-calendar"></i></div>
                                        <div><input type="text" value="@ViewData["maxdate"]" class="maxdate form-control" autocomplete="off" id="maxdate" name="maxdate" placeholder="To" /></div>

                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="input-group">
                                        <div class="input-group-addon" style="background-color:darkred">
                                            <span><i class="fa fa-group"></i></span>
                                        </div>
                                        <div>
                                            <select id="apptype" name="apptype" class="form-control apptype" multiple>
                                                <option value="NEW">New</option>
                                                <option value="RENEWAL">Renewal</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12" style="margin-top:10px">
                                <div class="col-md-3">
                                    <div class="input-group">
                                        <div class="input-group-addon" style="background-color:darkred">
                                            <span><i class="fa fa-group"></i></span>
                                        </div>
                                        <div>
                                            <select id="status" name="status" class="form-control status" multiple>
                                                <option value="AUTH">Approved</option>
                                                <option value="INIT">Payment Pending</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="input-group">
                                        <div class="input-group-addon" style="background-color:darkred">
                                            <span><i class="fa fa-list"></i></span>
                                        </div>
                                        <div>
                                            <select id="cat" name="cat" class="form-control cat" multiple>
                                                <option value="SSA">Site Suitability</option>
                                                <option value="PTE">Permit To Establish</option>
                                                <option value="ATC">Approval To Construct</option>
                                                <option value="LTO">License To Operate</option>
                                                <option value="ATM">Approval To Modify</option>
                                                <option value="ATO">Approval To Takeover</option>
                                                <option value="ATCLFP">Approval To Construct Lubricant Filling Plant</option>
                                                <option value="LTOLFP">License To Operate Lubricant Filling Plant</option>
                                                <option value="TCA">Tank Calibration Approval</option>
                                                <option value="TITA">Tank Integrity Test Approval</option>
                                                <option value="TPBA-PLW">Third Party Blending Approval (Plant Owner)</option>
                                                <option value="TPBA-PRW">Third Party Blending Approval (Product Owner)</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-2">
                                    <div class="input-group">
                                        <div class="input-group-addon" style="background-color:darkred">
                                            <span><i class="fa fa-home"></i></span>
                                        </div>
                                        <div>
                                            <select id="office" name="office" class="form-control office" multiple>
                                                @foreach (var item in fields)
                                                {
                                                    <option value="@item.Key">@item.Value</option>
                                                }
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-1">
                                    <div class="input-group">
                                        <div class="input-group-addon" style="background-color:darkred">
                                            &nbsp;<button id="searchdate" class="glyphicon glyphicon-search" style="margin-left:-4px; background-color:darkred; margin-top:-5px; border:none; font-size: large;"> Search</button>
                                        </div>

                                    </div>
                                </div>
                            </div>
                           
                        </div><br />
                        <div id="printJS-form" style="margin-bottom: 20px;">
                            <div class="row">
                                <span class="col-md-10">
                                    <span style="font-size:large" class="text-primary">Payment Summary</span>
                                </span>

                               
                            </div>
                            <div class="jumbotron">
                                <button type="button" id='btn' class="btn btn-warning btn-sm" style="float:right; margin-top:-30px; margin-right:15px" onclick="printDiv()" ;><span class="glyphicon glyphicon-print"></span> Print</button>
                                <div id='DivIdToPrint'>
                                    <div class="row">

                                        <div style="margin-left:15px; margin-right:15px">

                                            <div class="col-md-3">
                                                <div class="panel short-states" style="background-color:#ffffff">
                                                    <div class="panel-title">
                                                    </div>
                                                    <div class="panel-body">
                                                        <div><span class="col-md-offset-1 text-danger" style="font-size:30px">@Model.Where(x => x.Category.Equals("SSA")).Sum(x => Decimal.Parse(x.amt)).ToString("N2")</span></div>
                                                        <small class="label label-danger" style="font-size:15px">Total Suitability Payment(s)</small>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="panel short-states" style="background-color:#ffffff">
                                                    <div class="panel-title">
                                                    </div>
                                                    <div class="panel-body">
                                                        <div><span class="col-md-offset-1 text-info" style="font-size:30px">@Model.Where(x => x.Category.Equals("PTE")).Sum(x => Decimal.Parse(x.amt)).ToString("N2")</span></div>
                                                        <small class="label label-info" style="font-size:15px">Total PTE Payment(s)</small>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="panel short-states" style="background-color:#ffffff">
                                                    <div class="panel-title">
                                                    </div>
                                                    <div class="panel-body">
                                                        <div><span class="col-md-offset-1 text-success" style="font-size:30px">@Model.Where(x => x.Category.Equals("ATC")).Sum(x => Decimal.Parse(x.amt)).ToString("N2")</span></div>
                                                        <small class="label label-success" style="font-size:15px">Total ATC Payment(s)</small>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="panel short-states" style="background-color:#ffffff">
                                                    <div class="panel-title">
                                                    </div>
                                                    <div class="panel-body">
                                                        <div><span class="col-md-offset-1 text-warning" style="font-size:30px">@Model.Where(x => x.Category.Equals("ATM")).Sum(x => Decimal.Parse(x.amt)).ToString("N2")</span></div>
                                                        <small class="label label-warning" style="font-size:15px">Total Modification Payment(s)</small>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>


                                    <div class="row">
                                        <div style="margin-left:15px; margin-right:15px">
                                            <div class="col-md-3">
                                                <div class="panel short-states" style="background-color:#ffffff">
                                                    <div class="panel-title">
                                                    </div>
                                                    <div class="panel-body">
                                                        <div><span class="col-md-offset-1 text-primary" style="font-size:30px">@Model.Where(x => x.Category.Equals("LTOLFP")).Sum(x => Decimal.Parse(x.amt)).ToString("N2")</span></div>
                                                        <small class="label label-primary" style="font-size:15px">Total Lubricant Filling Plant(LTO) Payment(s)</small>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="panel short-states" style="background-color:#ffffff">
                                                    <div class="panel-title">
                                                    </div>
                                                    <div class="panel-body">
                                                        <div><span class="col-md-offset-1 text-danger" style="font-size:30px">@Model.Where(x => x.Category.Equals("TCA")).Sum(x => Decimal.Parse(x.amt)).ToString("N2")</span></div>
                                                        <small class="label label-danger" style="font-size:15px">Total Tank Calibration Payment(s)</small>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="panel short-states" style="background-color:#ffffff">
                                                    <div class="panel-title">
                                                    </div>
                                                    <div class="panel-body">
                                                        <div><span class="col-md-offset-1 text-success" style="font-size:30px">@Model.Where(x => x.Category.Equals("TITA")).Sum(x => Decimal.Parse(x.amt)).ToString("N2")</span></div>
                                                        <small class="label label-success" style="font-size:15px">Total Integrity Test Payment(s)</small>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="panel short-states" style="background-color:#ffffff">
                                                    <div class="panel-title">
                                                    </div>
                                                    <div class="panel-body">
                                                        <div><span class="col-md-offset-1 text-info" style="font-size:30px">@Model.Where(x => x.Category.Equals("TPBA-PLW")).Sum(x => Decimal.Parse(x.amt)).ToString("N2")</span></div>
                                                        <small class="label label-info" style="font-size:15px">Total Third Party Blending (Plant Owner)</small>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>


                                    <div class="row">
                                        <div style="margin-left:15px; margin-right:15px">
                                            <div class="col-md-3">
                                                <div class="panel short-states" style="background-color:#ffffff">
                                                    <div class="panel-title">
                                                    </div>
                                                    <div class="panel-body">
                                                        <div><span class="col-md-offset-1 text-primary" style="font-size:30px">@Model.Where(x => x.Category.Equals("ATCLFP")).Sum(x => Decimal.Parse(x.amt)).ToString("N2")</span></div>
                                                        <small class="label label-primary" style="font-size:15px">Total Lubricant Filling Plant(ATC) Payment(s)</small>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="panel short-states" style="background-color:#ffffff">
                                                    <div class="panel-title">
                                                    </div>
                                                    <div class="panel-body">
                                                        <div><span class="col-md-offset-1 text-danger" style="font-size:30px">@Model.Where(x => x.Category.Equals("ATO")).Sum(x => Decimal.Parse(x.amt)).ToString("N2")</span></div>
                                                        <small class="label label-danger" style="font-size:15px">Total Takeover Payment(s)</small>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-md-3">
                                                <div class="panel short-states" style="background-color:#ffffff">
                                                    <div class="panel-title">
                                                    </div>
                                                    <div class="panel-body">
                                                        <div><span class="col-md-offset-1 text-warning" style="font-size:30px">@Model.Where(x => x.Category.Equals("TPBA-PRW")).Sum(x => Decimal.Parse(x.amt)).ToString("N2")</span></div>
                                                        <small class="label label-warning" style="font-size:15px">Total Third Party Blending (Product Owner)</small>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-md-3">
                                                <div class="panel short-states" style="background-color:#ffffff">
                                                    <div class="panel-title">
                                                    </div>
                                                    <div class="panel-body">
                                                        <div><span class="col-md-offset-1 text-primary" style="font-size:30px">@Model.Where(x => x.Category.Equals("LTO")).Sum(x => Decimal.Parse(x.amt)).ToString("N2")</span></div>
                                                        <small class="label label-primary" style="font-size:15px">Total LTO Payment(s)</small>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-12">
                            <table class="table table-striped" id="payment" style="font-size:small">
                                <thead>
                                    <tr>
                                        <th><strong>ApplicationID</strong>
                                        <th><strong>Remita Ref</strong> </th>
                                        <th><strong>Applicaation Type</strong></th>
                                        <th><strong>Category</strong></th>
                                        <th><strong>Status</strong></th>
                                        <th><strong>Total Amount</strong> </th>
                                        <th><strong>Transaction Date</strong> </th>
                                        <th><strong>State Name</strong></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach (var payment in Model)
                                    {
                                        <tr>
                                            <td>@payment.ApplicationID</td>
                                            <td>@payment.RRReference</td>
                                            <td>@payment.ApplicationType</td>
                                            <td>@payment.Category</td>
                                            <td>
                                                @{var status = payment.Status == "AUTH" ? "Paid" : "Payment Pending"; }
                                                @status
                                            </td>
                                            <td>@payment.amt</td>
                                            <td>@payment.transDATE</td>
                                            <td>@payment.StateName</td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                        </div>
                        @*</div>*@
                    </div>
                }
            </div>
        </div>
        @*</div>
            </div>*@
        @*<div class="jumbotron">
                <div id="container" style="min-width: 310px; height: 400px; max-width: 600px; margin: 0 auto">
                    <div class="panel short-states">
                        <div class="panel-title">
                        </div>
                        <div class="panel-body img-circle" style="border-radius:100%">
                            <div text-danger" style="font-size:20px"><img src="~/Images/Nigerian-Naira.png" />@TempData["Sumtotalpayment"]</div><br />
                            <small class="label label-danger" style="font-size:15px">Total Payment</small>
                        </div>
                    </div>

                </div>
            </div>*@
    </div>















    <div class="row">
        <div class="col-md-12">
            <div class="row">
                <div class="col-md-12">
                    <table class="table table-striped table-bordered" id="paymentsumary" style="font-size:small">
                        <thead>
                            <tr>
                                <th><b>Category</b></th>
                                <th><b>FG</b> </th>
                                <th><b>DPR</b> </th>
                                <th><b>BrandOne</b> </th>
                                <th><b>Total</b> </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>SSA Approval</td>
                                <td>N/A</td>
                                <td>@ViewBag.SSAIGR</td>
                                <td>@ViewBag.SSABrandOne</td>
                                <td>@ViewBag.SSATotal</td>
                            </tr>
                            <tr>
                                <td>PTE Approval</td>
                                <td>@ViewBag.PTETotal</td>
                                <td>N/A</td>
                                <td>N/A</td>
                                <td>@ViewBag.PTETotal</td>
                            </tr>
                            <tr>
                                <td>ATC Approval</td>
                                <td>@ViewBag.ATCTotal</td>
                                <td>N/A</td>
                                <td>N/A</td>
                                <td>@ViewBag.ATCTotal</td>
                            </tr>
                            <tr>
                                <td>License To Operate</td>
                                <td>@ViewBag.LTOTotal</td>
                                <td>N/A</td>
                                <td>N/A</td>
                                <td>@ViewBag.LTOTotal</td>
                            </tr>
                            <tr>
                                <td>Approval To Modify</td>
                                <td>N/A</td>
                                <td>@ViewBag.ATMIGR</td>
                                <td>@ViewBag.ATMBrandOne</td>
                                <td>@ViewBag.ATMTotal</td>
                            </tr>
                            <tr>
                                <td>Approval To Take-Over</td>
                                <td>N/A</td>
                                <td>@ViewBag.ATOIGR</td>
                                <td>@ViewBag.ATOBrandOne</td>
                                <td>@ViewBag.ATOTotal</td>
                            </tr>
                            <tr>
                                <td>Lubricant Filling Plant (ATC)</td>
                                <td>N/A</td>
                                <td>@ViewBag.ATCLFPIGR</td>
                                <td>@ViewBag.ATCLFPBrandOne</td>
                                <td>@ViewBag.ATCLFPTotal</td>
                            </tr>
                            <tr>
                                <td>Lubricant Filling Plant (LTO)</td>
                                <td>N/A</td>
                                <td>@ViewBag.LTOLFPIGR</td>
                                <td>@ViewBag.LTOLFPBrandOne</td>
                                <td>@ViewBag.LTOLFPTotal</td>
                            </tr>
                            <tr>
                                <td>Tank Calibration Approval</td>
                                <td>N/A</td>
                                <td>@ViewBag.TCAIGR</td>
                                <td>@ViewBag.TCABrandOne</td>
                                <td>@ViewBag.TCATotal</td>
                            </tr>
                            <tr>
                                <td>Tank Integrity Test Approval</td>
                                <td>N/A</td>
                                <td>@ViewBag.TITAIGR</td>
                                <td>@ViewBag.TITABrandOne</td>
                                <td>@ViewBag.TITATotal</td>
                            </tr>
                            <tr>
                                <td>Third Party Blending Approval (Plant Owner)</td>
                                <td>N/A</td>
                                <td>@ViewBag.TPBAPLWIGR</td>
                                <td>@ViewBag.TPBAPLWBrandOne</td>
                                <td>@ViewBag.TPBAPLWTotal</td>
                            </tr>
                            <tr>
                                <td>Third Party Blending Approval (Product Owner)</td>
                                <td>N/A</td>
                                <td>@ViewBag.TPBAPRWIGR</td>
                                <td>@ViewBag.TPBAPRWBrandOne</td>
                                <td>@ViewBag.TPBAPRWTotal</td>
                            </tr>

                        </tbody>
                        <tfoot>
                            <tr>
                                <th><b>Grand Total</b></th>
                                <th><b>₦ @ViewBag.GrandTotalFG</b></th>
                                <th><b>₦ @ViewBag.GrandTotalIGR</b></th>
                                <th><b>₦ @ViewBag.GrandTotalBrandOne</b></th>
                                <th><b>₦ @ViewBag.GrandTotal</b></th>
                            </tr>
                        </tfoot>
                    </table>

                    <hr style="border: 1px solid white" />
                    <div class="row">
                        <div class="col-md-12">
                            <div id="piecontainer"></div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-12">
                            <div id="barcontainer1" style="min-height:600px; margin: 0 auto"></div>
                        </div>
                    </div>

                    <br /><br />

                    <div class="panel">
                        @*<header class="panel-heading panel-border">
                                <h3 class="text-primary"> payment Report </h3>

                                <div class="pull-right" style="margin-right:25px">
                                    <div class="row">

                                        <div class="col-md-12">
                                            <div class="panel short-states" style="background-color:#eaeef3; margin-right:50px; margin-top:-50px">
                                                <div class="panel-title">
                                                </div>
                                                <div class="panel-body">
                                                    <h1><span class="col-md-offset-1 text-danger">@TempData["totalpaymentcount"] </span></h1>
                                                    <small class="label label-danger" style="font-size:15px">Total Count</small>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </header>*@
                        <div class="panel-body">
                            @*<div class="row">
                                    <div class="col-md-2">

                                        <div class="input-group">

                                            <div class="input-group-addon" style="background-color:orange"><i class="fa fa-calendar"></i></div>
                                            <div><input type="text" class="min form-control" autocomplete="off" id="min" name="min" placeholder="From" /></div>
                                        </div>
                                    </div><div class="col-md-3">
                                        <div class="input-group">
                                            <div class="input-group-addon" style="background-color:yellowgreen"><i class="fa fa-calendar"></i></div>
                                            <div><input type="text" class="maxdate form-control" autocomplete="off" id="maxdate" name="maxdate" placeholder="To" /></div>
                                            <div class="input-group-addon" style="background-color:red">
                                                <button id="searchdate" class="glyphicon glyphicon-search" style="margin-left:-4px; background-color:red; margin-top:-10px; border:none"></button>
                                            </div>

                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="input-group">
                                            <div class="input-group-addon" style="background-color:darkred">
                                                <span><i class="fa fa-group"></i></span>
                                            </div>
                                            <div><input id="companyemail" name="companyemail" placeholder="search by company email" class="form-control companyemail" /></div>
                                        </div>
                                    </div>
                                    <div class="input-group">
                                        <input type="button" class="btn btn-danger" id="all" name="all" value="Show All Record" />
                                    </div>
                                </div><br /><br />


                                <div class="row" style="margin-top:-50px">

                                    <div class="col-md-3">
                                        <div class="input-group">
                                            <select id="appstatus" name="appstatus" class="form-control">
                                                <option disabled selected>--Search By Application Status--</option>
                                                <option value="Processing">PROCESSING</option>
                                                <option value="Approved">APPROVED</option>
                                                <option value="Rejected">REJECTED</option>
                                            </select>
                                            <div class="input-group-addon" style="background-color:red">
                                                <button id="clearbtn2" style="margin-left:-4px; background-color:red; margin-top:-10px; border:none">Clear</button>
                                            </div>
                                        </div>
                                    </div>


                                    <div class="col-md-3">
                                        <div class="input-group">

                                            <select id="licensetype" name="licensetype" class="form-control">
                                                <option disabled selected>--Search By License/Approval Type--</option>
                                                <option value="SUI">Site Suitability</option>
                                                <option value="ATC">Approval To Construct</option>
                                                <option value="PT">Pressure Test</option>
                                                <option value="LTO">License To Operate</option>
                                                <option value="MOD">Approval To Modify</option>
                                                <option value="TAKE OVER">Approval To Takeover</option>
                                            </select>
                                            <div class="input-group-addon" style="background-color:red">
                                                <button id="clearbtn1" style="margin-left:-4px; background-color:red; margin-top:-10px; border:none">Clear</button>
                                            </div>
                                        </div>
                                    </div>
                                </div><br /><br />*@



                            @*<div class="row">
                                    <div class="col-md-12">
                                        <table class="table table-striped table-bordered" id="payment" style="font-size:small">
                                            <thead>
                                                <tr>
                                                    <th><strong>ApplicationID</strong>
                                                    <th><strong>Remita Ref</strong> </th>
                                                    <th><strong>Category</strong></th>
                                                    <th><strong>Status</strong></th>
                                                    <th><strong>Company Name</strong></th>
                                                    <th><strong>Company Email</strong> </th>
                                                    <th><strong>State Name</strong> </th>
                                                    <th><strong>Total Amount</strong> </th>
                                                    <th><strong>Transaction Date</strong> </th>
                                                </tr>
                                            </thead>
                                            <tbody></tbody>
                                            <tfoot>
                                                <tr>
                                                    <th></th>
                                                    <th></th>
                                                    <th></th>
                                                    <th></th>
                                                    <th></th>
                                                    <th></th>
                                                    <th></th>
                                                    <th></th>
                                                    <th></th>
                                                </tr>
                                            </tfoot>
                                        </table>
                                    </div>
                                </div>*@
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="jumbotron">
        @*<div id="container" style="min-width: 310px; height: 400px; max-width: 600px; margin: 0 auto">*@


            <div class="row">
                <div style="margin-left:15px; margin-right:15px">
                    <div class="col-md-6">
                        <div class="panel short-states" style="background-color:#ffffff">
                            <div class="panel-title">
                            </div>
                            <div class="panel-body">
                                <div text-danger" style="font-size:20px"><img src="~/Images/Nigerian-Naira.png" />@ViewBag.Sumtotalpaymentcompleted</div><br />
                                <small class="label label-danger" style="font-size:15px">Total Payment Completed</small>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="panel short-states" style="background-color:#ffffff">
                            <div class="panel-title">
                            </div>
                            <div class="panel-body">
                                <div text-danger" style="font-size:20px"><img src="~/Images/Nigerian-Naira.png" />@ViewBag.Sumtotalpendingpayment</div><br />
                                <small class="label label-danger" style="font-size:15px">Total Payment Pending</small>
                            </div>
                        </div>
                    </div>
                   
                </div>
            </div>

            <div class="row">
                <div style="margin-left:15px; margin-right:15px">
                    <div class="col-md-6">
                        <div class="panel short-states" style="background-color:#ffffff">
                            <div class="panel-title">
                            </div>
                            <div class="panel-body">
                                <div><span class="col-md-offset-1 text-success" style="font-size:30px">@ViewBag.totalpaymentcompletedcount</span></div>
                                <small class="label label-success" style="font-size:15px">Total Payment Completed Count</small>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="panel short-states" style="background-color:#ffffff">
                            <div class="panel-title">
                            </div>
                            <div class="panel-body">
                                <div><span class="col-md-offset-1 text-info" style="font-size:30px">@ViewBag.totalpendingpaymentcount</span></div>
                                <small class="label label-info" style="font-size:15px">Total Payment Pending Count</small>
                            </div>
                        </div>
                    </div>
                    
                   
                </div>
            </div>




            @*<div class="panel short-states">
            <div class="panel-title">
            </div>
            <div class="panel-body img-circle" style="border-radius:100%">
                <div text-danger" style="font-size:20px"><img src="~/Images/Nigerian-Naira.png" />@ViewBag.Sumtotalpaymentcompleted</div><br />
                <small class="label label-danger" style="font-size:15px">Total Payment Completed</small>
            </div>
        </div><br /><br />
        <div class="panel short-states">
            <div class="panel-title">
            </div>
            <div class="panel-body img-circle" style="border-radius:100%">
                <div text-danger" style="font-size:20px"><img src="~/Images/Nigerian-Naira.png" />@ViewBag.Sumtotalpendingpayment</div><br />
                <small class="label label-danger" style="font-size:15px">Total Payment Pending</small>
            </div>
        </div>

        <div class="panel short-states">
            <div class="panel-title">
            </div>
            <div class="panel-body img-circle" style="border-radius:100%">
                <div><span class="col-md-offset-1 text-success" style="font-size:30px">@ViewBag.totalpaymentcompletedcount</span></div>
                <small class="label label-success" style="font-size:15px">Total Payment Completed</small>
            </div>
        </div><br /><br />
        <div class="panel short-states">
            <div class="panel-title">
            </div>
            <div class="panel-body img-circle" style="border-radius:100%">
                <div><span class="col-md-offset-1 text-info" style="font-size:30px">@ViewBag.totalpendingpaymentcount</span></div>
                <small class="label label-info" style="font-size:15px">Total Payment Pending Count</small>
            </div>
        </div>*@

        @*</div>*@
    </div>
</div>
@section Scripts {

    <script type="text/javascript">

        $(document).ready(function () {

            //$("#clearbtn2").click(function () {
            //    $("#appstatus").val('');
            //    table.search(this.value).draw();
            //    table.ajax.reload();
            //});

            //$("#clearbtn1").click(function () {
            //    $("#licensetype").val('');
            //    table.search(this.value).draw();
            //    table.ajax.reload();
            //});


            //$("#appstatus, #licensetype").change(function () {
            //    table.search(this.value).draw();
            //    table.ajax.reload();
            //});



            //$("#all").click(function () {
            //    table.search("All Payment").draw();
            //});
            //$("#searchdate").click(function () {
            //    min1 = $(".min").val();
            //    datemax1 = $(".maxdate").val();
            //    table.draw();
            //});


            $("#paymentsumary").dataTable({
                "aLengthMenu": [25, 50, 75, 100, 200],
                'iDisplayLength': 25,
                columnDefs: [{ orderable: false, "targets": [0, -1] }],
                dom: 'Bfrtip',
                buttons: [
                    'copy', 'csv', 'excel', 'pdf', 'print'
                ],
                buttons: [
                    { extend: 'copyHtml5', footer: true },
                    { extend: 'excelHtml5', footer: true },
                    { extend: 'csvHtml5', footer: true },
                    { extend: 'pdfHtml5', footer: true },
                ],
                "language": {
                    "lengthMenu": "Display  _MENU_ records",
                    "zeroRecords": "No record found",
                    "info": "Showing page _PAGE_ of _PAGES_",
                    "infoEmpty": "No Record to Display Currently",
                    "infoFiltered": "(filtered from _MAX_ total records)"
                },
                "order": [[1, "desc"]]
            });


            $.getJSON("/Admin/PaymentChartReport", function (data) {
                debugger;
                var chart1 = Highcharts.chart({
                    chart: {
                        renderTo: 'piecontainer',
                        plotBackgroundColor: null,
                        plotBorderWidth: null,
                        plotShadow: false,
                        type: 'pie',
                        options3d: {
                            enabled: true,
                            alpha: 45,
                            beta: 0
                        }
                    },

                    title: {
                        text: 'Revenue Percentage Generated by States'
                    },
                    tooltip: {
                        pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
                    },
                    plotOptions: {
                        pie: {
                            allowPointSelect: true,
                            cursor: 'pointer',
                            depth: 35,
                            dataLabels: {
                                enabled: true,
                                format: '<b>{point.name}</b>: {point.percentage:.1f} %',
                                style: {
                                    color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
                                }
                            }
                        }
                    },
                    series: [{
                        name: 'Ratio',
                        colorByPoint: true,
                        data: [
                            { name: 'Abia', y: data.Abia },
                            { name: 'Abuja', y: data.Abuja },
                            { name: 'Adamawa', y: data.Adamawa },
                            { name: 'Akwa ibom', y: data.AkwaIbom },
                            { name: 'Anambra', y: data.Anambra },
                            { name: 'Bauchi', y: data.Bauchi },
                            { name: 'Bayelsa', y: data.Bayelsa },
                            { name: 'Benue', y: data.Benue },
                            { name: 'Borno', y: data.Borno },
                            { name: 'Cross River', y: data.CrossRiver },
                            { name: 'Delta', y: data.Delta },
                            { name: 'Ebonyi', y: data.Ebonyi },
                            { name: 'Edo', y: data.Edo },
                            { name: 'Ekiti', y: data.Ekiti },
                            { name: 'Enugu', y: data.Enugu },
                            { name: 'Gombe', y: data.Gombe },
                            { name: 'Imo', y: data.Imo },
                            { name: 'Jigawa', y: data.Jigawa },
                            { name: 'Kaduna', y: data.Kaduna },
                            { name: 'Kano', y: data.Kano },
                            { name: 'Katsina', y: data.Katsina },
                            { name: 'Kebbi', y: data.Kebbi },
                            { name: 'Kogi', y: data.Kogi },
                            { name: 'Kwara', y: data.Kwara },
                            { name: 'Lagos', y: data.Lagos },
                            { name: 'Nasarawa', y: data.Nasarawa },
                            { name: 'Niger', y: data.Niger },
                            { name: 'Ogun', y: data.Ogun },
                            { name: 'Ondo', y: data.Ondo },
                            { name: 'Osun', y: data.Osun },
                            { name: 'Oyo', y: data.Oyo },
                            { name: 'Plateau', y: data.Plateau },
                            { name: 'Rivers', y: data.Rivers },
                            { name: 'Sokoto', y: data.Sokoto },
                            { name: 'Taraba', y: data.Taraba },
                            { name: 'Yobe', y: data.Yobe },
                            { name: 'Zamfara', y: data.Zamfara },
                        ],
                        exporting: true
                    }]
                });

                var chart2 = Highcharts.chart({
                    chart: {
                        renderTo: 'barcontainer1',
                        type: 'column',
                        margin: 75,
                        options3d: {
                            enabled: true,
                            alpha: 15,
                            beta: 15,
                            depth: 50,
                            viewDistance: 25
                        }
                    },
                    title: {
                        text: "Revenue Generated by States"
                    },

                    yAxis: {
                        type: 'logarithmic',
                        title: {
                            text: false
                        }
                    },
                    xAxis: {
                        labels: {
                            rotation: -45,
                        },
                        categories: ['Abia', 'Abuja', 'Adamawa', 'Akwa Ibom', 'Anambra', 'Bauchi', 'Bayelsa', 'Benue', 'Borno', 'Cross River', 'Delta',
                            'Ebonyi', 'Edo', 'Ekiti', 'Enugu', 'Gombe', 'Imo', 'Jigawa', 'Kaduna', 'Kano', 'Katsina', 'Kebbi', 'Kogi', 'Kwara', 'Lagos', 'Nasarawa',
                            'Niger', 'Ogun', 'Ondo', 'Osun', 'Oyo', 'Plateau', 'Rivers', 'Sokoto', 'Taraba', 'Yobe', 'Zamfara']
                    },

                    plotOptions: {
                        column: {
                            depth: 25
                        }
                    },
                    series: [{
                        name: 'Revenue',
                        colorByPoint: true,
                        data: [
                            [data.Abia], [data.Abuja], [data.Adamawa], [data.AkwaIbom], [data.Anambra], [data.Bauchi], [data.Bayelsa], [data.Benue], [data.Borno], [data.CrossRiver], [data.Delta],
                            [data.Ebonyi], [data.Edo], [data.Ekiti], [data.Enugu], [data.Gombe], [data.Imo], [data.Jigawa], [data.Kaduna], [data.Kano], [data.Katsina], [data.Kebbi],
                            [data.Kogi], [data.Kwara], [data.Lagos], [data.Nasarawa], [data.Niger], [data.Ogun], [data.Ondo], [data.Osun], [data.Oyo], [data.Plateau], [data.Rivers], [data.Sokoto],
                            [data.Taraba], [data.Yobe], [data.Zamfara]
                        ]
                    }]
                });

            });



            //var table = $("#payment").DataTable({
            //    "processing": true,
            //    "serverSide": true,
            //    //"search": { "search": "Default_filter" },
            //    ajax: {
            //        url: "/Admin/GetPaymentReport",
            //        data: function (d) {
            //            d.mymin = $("#min").val();
            //            d.mymax = $("#maxdate").val();

            //        },
            //        type: "POST",
            //        "lengthMenu": [[10, 25, 50, 100], [10, 25, 50, 100]],

            //    },
            //    //sDom: 'Blrtip',
            //    dom: 'Blfrtip',
            //    columns: [
            //        {
            //            data: "ApplicationID"
            //        },
            //        {
            //            data: "RRReference"
            //        },
            //        {
            //            data: "category"
            //        },
            //        {
            //            data: "Status"
            //        },
            //        {
            //            data: "companyname"
            //        },
            //        {
            //            data: "companyemail"
            //        },

            //        {
            //            data: "StateName"
            //        },

            //        {
            //            data: "amt",

            //        },
            //        {
            //            data: "transdate",

            //        },
            //    ],
            //    "footerCallback": function (row, data, start, end, display) {
            //        var api = this.api(), data;

            //        // Remove the formatting to get integer data for summation
            //        var intVal = function (i) {
            //            return typeof i === 'string' ?
            //                i.replace(/[\$,]/g, '') * 1 :
            //                typeof i === 'number' ?
            //                    i : 0;
            //        };

            //        // Total over this page
            //        pageTotal = api
            //            .column(7, { filter: 'applied' })
            //            .data()
            //            .reduce(function (a, b) {
            //                return intVal(a) + intVal(b);
            //            }, 0);

            //        // Update footer
            //        debugger;
            //        $(api.column(7).footer()).html(
            //            'Total Per Page= ' + '₦' + pageTotal,
            //            //$("#totalsum").text(pageTotal),
            //            //$("#amtinword").text("(" + numberToWords(Number(pageTotal)) + ")"),
            //        );


            //    }
            //});




            $(".companyemail").autocomplete({
                source: function (request, response) {
                    debugger;
                    $.ajax({
                        url: '/Admin/GetCompanyNameAutoSearch',
                        type: "GET",
                        datatype: "json",
                        data: {
                            term: request.term
                        },
                        success: function (data) {
                            response($.map(data,
                                function (val, item) {

                                    return { label: val.textvalue, value: val.textvalue, companyemail: val.textvalue, }

                                }));
                        }
                    });
                },
                select: function (event, ui) {
                    debugger;
                    $(".companyemail").val(ui.item.companyemail);
                    var textvalue = $(".companyemail").val();
                    table.search(this.value).draw();
                }
            });
            $("#min,#maxdate").datepicker({
                "onSelect": function (date) {

                }, changeMonth: true, changeYear: true, dateFormat: "M d yy"
            });
            $(".office").select2({
                placeholder: "Select Office"
            });
            $(".cat").select2({
                placeholder: "Select one or multiple Category"
            });
            $(".apptype").select2({
                placeholder: "Select one or multiple App. types"
            });
            $(".status").select2({
                placeholder: "Select application status"
            });
            $("#payment").DataTable({
                dom: 'Blfrtip',
            });
        });

        function printDiv() {

            var divToPrint = document.getElementById('DivIdToPrint');

            var newWin = window.open('', 'Print-Window');

            newWin.document.open();

            newWin.document.write('<html><body onload="window.print()">' + divToPrint.innerHTML + '</body></html>');

            newWin.document.close();

            setTimeout(function () { newWin.close(); }, 10);

        }
        function printtag(tagid) {
            debugger;
            var hashid = "#" + tagid;
            var tagname = $(hashid).prop("tagName").toLowerCase();
            var attributes = "";
            var attrs = document.getElementById(tagid).attributes;
            $.each(attrs, function (i, elem) {
                attributes += " " + elem.name + " ='" + elem.value + "' ";
            })
            var divToPrint = $(hashid).html();
            var head = "<html><head>" + $("head").html() + "</head>";
            var allcontent = head + "<body  onload='window.print()' >" + "<" + tagname + attributes + ">" + divToPrint + "</" + tagname + ">" + "</body></html>";
            var newWin = window.open('', 'Print-Window');
            newWin.document.open();
            newWin.document.write(allcontent);
            newWin.document.close();
        }
                //function numberToWords(number) {
                //    var digit = ['zero', 'one', 'two', 'three', 'four', 'five', 'six', 'seven', 'eight', 'nine'];
                //    var elevenSeries = ['ten', 'eleven', 'twelve', 'thirteen', 'fourteen', 'fifteen', 'sixteen', 'seventeen', 'eighteen', 'nineteen'];
                //    var countingByTens = ['twenty', 'thirty', 'forty', 'fifty', 'sixty', 'seventy', 'eighty', 'ninety'];
                //    var shortScale = ['', 'thousand', 'million', 'billion', 'trillion'];

                //    number = number.toString(); number = number.replace(/[\, ]/g, ''); if (number != parseFloat(number)) return 'not a number'; var x = number.indexOf('.'); if (x == -1) x = number.length; if (x > 15) return 'too big'; var n = number.split(''); var str = ''; var sk = 0; for (var i = 0; i < x; i++) { if ((x - i) % 3 == 2) { if (n[i] == '1') { str += elevenSeries[Number(n[i + 1])] + ' '; i++; sk = 1; } else if (n[i] != 0) { str += countingByTens[n[i] - 2] + ' '; sk = 1; } } else if (n[i] != 0) { str += digit[n[i]] + ' '; if ((x - i) % 3 == 0) str += 'hundred '; sk = 1; } if ((x - i) % 3 == 1) { if (sk) str += shortScale[(x - i - 1) / 3] + ' '; sk = 0; } } if (x != number.length) { var y = number.length; str += 'point '; for (var i = x + 1; i < y; i++) str += digit[n[i]] + ' '; } str = str.replace(/\number+/g, ' '); return str.trim() + ".";

                //}

    </script>
}
